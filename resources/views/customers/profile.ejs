<style>
    /* Define the main color variable for easy theme changes */
    :root {
        --main-color: #4a76a8;
        /* A nice, professional blue */
    }

    /* Utility classes to use the main color */
    .bg-main-color {
        background-color: var(--main-color);
    }

    .text-main-color {
        color: var(--main-color);
    }

    .border-main-color {
        border-color: var(--main-color);
    }

    .focus\:ring-main-color:focus {
        --tw-ring-color: var(--main-color);
    }

    /* Apply the Inter font family */
    body {
        font-family: 'Inter', sans-serif;
    }
</style>

<div class="bg-gray-100 min-h-screen font-sans">
    <div class="container mx-auto p-4 md:p-6 lg:p-8">
        <div class="md:flex md:space-x-6">

            <div class="w-full md:w-4/12 lg:w-3/12">
                <div class="bg-white p-6 rounded-lg shadow-lg text-center">
                    <div class="image overflow-hidden mb-4">
                        <img class="h-32 w-32 rounded-full border-4 border-white shadow-sm mx-auto"
                            src="https://placehold.co/128x128/E0E7FF/4a76a8?text=<%= session.user.name.charAt(0) %>"
                            alt="User Profile Photo">
                    </div>
                    <h1 class="text-gray-900 font-bold text-2xl leading-8 my-1">
                        <%= user.name %>
                    </h1>
                    <h3 class="text-gray-500 font-lg text-semibold leading-6 capitalize">
                        <%= user.role %>
                    </h3>

                    <div class="mt-4 py-2">
                        <span
                            class="inline-flex items-center rounded-full bg-green-100 px-3 py-1 text-sm font-medium text-green-700 ring-1 ring-inset ring-green-600/20">
                            <svg class="mr-1.5 h-2 w-2 text-green-500" fill="currentColor" viewBox="0 0 8 8">
                                <circle cx="4" cy="4" r="3" />
                            </svg>
                            Active
                        </span>
                    </div>

                    <div class="mt-4">
                        <a href="/logout"
                            class="w-full text-center block rounded-lg bg-red-500 px-4 py-2.5 text-sm font-semibold text-white shadow-sm hover:bg-red-600 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-red-600 transition-colors duration-200 h-8 flex items-center justify-center">
                            Logout
                        </a>
                    </div>
                </div>
            </div>

            <div class="w-full md:w-8/12 lg:w-9/12 mt-6 md:mt-0">
                <div class="bg-white p-6 shadow-lg rounded-lg">
                    <div class="flex items-center space-x-3 border-b border-gray-200 pb-4">
                        <svg class="h-6 w-6 text-main-color" xmlns="http://www.w3.org/2000/svg" fill="none"
                            viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                        </svg>
                        <h2 class="text-xl text-gray-800 font-bold tracking-wide">Profile Details</h2>
                    </div>

                    <div class="text-gray-700 mt-6">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-6 text-sm">
                            <div>
                                <p class="font-medium text-gray-500">Name</p>
                                <p class="text-gray-800 font-semibold break-words">
                                    <%= user.name %>
                                </p>
                            </div>
                            <div>
                                <p class="font-medium text-gray-500">Contact No.</p>
                                <p class="text-gray-800 font-semibold">
                                    <%= user?.phone[0] ?? 'N/A' %>
                                </p>
                            </div>
                            <div>
                                <p class="font-medium text-gray-500">User Since</p>
                                <p class="text-gray-800 font-semibold">
                                    <%= accountAge %>
                                </p>
                            </div>
                            <div>
                                <p class="font-medium text-gray-500">Total Orders</p>
                                <p class="text-gray-800 font-semibold">
                                    <%= totalOrders %>
                                </p>
                            </div>
                            <div>
                                <p class="font-medium text-gray-500">Total Amount Spent</p>
                                <p class="text-gray-800 font-semibold"> â‚¹ <%= totalAmountSpent %>
                                </p>
                            </div>
                            <div class="md:col-span-2">
                                <p class="font-medium text-gray-500">Email</p>
                                <a class="text-main-color font-semibold hover:underline break-all"
                                    href="mailto:<%= user.email %>">
                                    <%= user.email %>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="bg-white p-6 shadow-lg rounded-lg mt-6">
                    <div
                        class="flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between border-b border-gray-200 pb-4 mb-6">
                        <div class="flex items-center gap-3">
                            <svg class="w-6 h-6 text-main-color" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                                xmlns="http://www.w3.org/2000/svg">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z">
                                </path>
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path>
                            </svg>
                            <h2 class="text-xl text-gray-800 font-bold tracking-wide">Manage Addresses</h2>
                        </div>
                        <a href="/customers/add-address"
                            class="inline-flex w-full sm:w-auto items-center justify-center gap-2 bg-green-500 text-white px-4 py-2 rounded-lg text-sm font-semibold hover:bg-green-600 transition-colors duration-200">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                                xmlns="http://www.w3.org/2000/svg">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
                            </svg>
                            <span>Add New</span>
                        </a>
                    </div>

                    <div>
                        <% if(!address || address?.length===0) { %>
                            <div class="text-center py-8">
                                <img src="/img/dataNotFound.svg" alt="Address Not Found" class="w-32 h-32 mx-auto mb-4"
                                    onerror="this.src='https://placehold.co/128x128/F3F4F6/9CA3AF?text=No+Data'">
                                <p class="text-gray-500 mb-4">No address found. Please add a new address to get started.
                                </p>
                                <a href="/customers/add-address"
                                    class="inline-block bg-green-500 text-white px-5 py-2 rounded-lg text-sm font-semibold hover:bg-green-600 transition-colors duration-200">
                                    + Add Address
                                </a>
                            </div>
                            <% } else { %>
                                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                                    <% address?.addressInfo?.forEach((addr, index)=> { %>
                                        <% const isPrimary=index===0; %>
                                            <div
                                                class="border rounded-lg p-4 flex flex-col justify-between hover:shadow-lg transition-shadow duration-200 <%= isPrimary ? 'bg-blue-50 border-main-color' : 'bg-white' %>">
                                                <div>
                                                    <div class="flex items-start justify-between mb-3">
                                                        <div class="flex items-center gap-3">
                                                            <span
                                                                class="flex h-10 w-10 items-center justify-center rounded-full bg-blue-100 text-main-color font-semibold">
                                                                <%= index + 1 %>
                                                            </span>
                                                            <div>
                                                                <p class="font-bold text-gray-800">Address <%= index + 1
                                                                        %>
                                                                </p>
                                                                <p
                                                                    class="text-xs text-gray-500 uppercase tracking-wide">
                                                                    Saved location</p>
                                                            </div>
                                                        </div>
                                                        <span
                                                            class="text-xs font-semibold text-orange-600 bg-orange-100 px-2 py-1 rounded-full whitespace-nowrap">
                                                            <%= addr.addressType.toUpperCase() %>
                                                        </span>
                                                    </div>
                                                    <div class="text-sm text-gray-600 space-y-1.5">
                                                        <p><span class="font-semibold text-gray-700">Phone:</span>
                                                            <%= addr.phone %>
                                                        </p>
                                                        <p><span class="font-semibold text-gray-700">Address:</span>
                                                            <%= addr.addressLine1 %>, <%= addr.addressLine2 %>
                                                        </p>
                                                        <p><span class="font-semibold text-gray-700">City:</span>
                                                            <%= addr.city %>, <%= addr.state %> - <%= addr.postalCode %>
                                                        </p>
                                                        <p><span class="font-semibold text-gray-700">Landmark:</span>
                                                            <%= addr.landmark %>
                                                        </p>
                                                    </div>
                                                </div>
                                                <div class="text-right mt-4">
                                                    <a href="/customers/edit-address/<%= addr._id %>"
                                                        class="font-semibold text-main-color hover:underline text-sm">Edit</a>
                                                </div>
                                            </div>
                                            <% }); %>
                                </div>
                                <% } %>
                    </div>
                </div>
                <div class="bg-white p-6 shadow-lg rounded-lg mt-6">
                    <div class="flex items-center space-x-3 border-b border-gray-200 pb-4">
                        <svg class="w-6 h-6 text-main-color" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                            xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z">
                            </path>
                        </svg>
                        <h2 class="text-xl text-gray-800 font-bold tracking-wide">Contact & Support</h2>
                    </div>
                    <div class="mt-6 space-y-4 text-sm text-gray-700">
                        <p>For Email updates, order cancellations, or any other queries, please feel
                            free to contact us.</p>
                        <div class="flex items-center">
                            <span class="font-semibold w-24">Admin Phone:</span>
                            <a class="text-main-color font-semibold hover:underline"
                                href="tel:+917872727290">7872727290</a>
                        </div>
                        <div class="flex items-center">
                            <span class="font-semibold w-24">Support Email:</span>
                            <a class="text-main-color font-semibold hover:underline"
                                href="mailto:feedmore.in@gmail.com">feedmore.in@gmail.com</a>
                        </div>
                        <p class="pt-2 text-gray-500">We are happy to help you!</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>